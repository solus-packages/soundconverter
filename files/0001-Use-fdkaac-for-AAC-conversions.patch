From 9b43e1698ae1263a2abfac4cfc0ef35778112277 Mon Sep 17 00:00:00 2001
From: Jacob <Jacalz@users.noreply.github.com>
Date: Sun, 9 Feb 2020 15:35:57 +0100
Subject: [PATCH] Use fdkaac for AAC conversions

---
 soundconverter/gstreamer.py | 4 ++--
 soundconverter/ui.py        | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/soundconverter/gstreamer.py b/soundconverter/gstreamer.py
index b17f437..1630319 100644
--- a/soundconverter/gstreamer.py
+++ b/soundconverter/gstreamer.py
@@ -113,7 +113,7 @@ def gtk_sleep(duration):
     ('id3v2mux', 'MP3 tags', 'mp3-id-tags'),
     ('xingmux', 'VBR tags', 'mp3-vbr-tags'),
     ('lamemp3enc', 'MP3', 'mp3-enc'),
-    ('faac', 'AAC', 'aac-enc'),
+    ('fdkaacenc', 'AAC', 'aac-enc'),
     ('avenc_aac', 'AAC', 'aac-enc'),
     ('mp4mux', 'AAC', 'aac-mux'),
     ('opusenc', 'Opus', 'opus-enc'),
@@ -665,7 +665,7 @@ def add_mp3_encoder(self):
         return cmd
 
     def add_aac_encoder(self):
-        encoder = 'faac' if 'faac' in available_elements else 'avenc_aac'
+        encoder = 'fdkaacenc' if 'fdkaacenc' in available_elements else 'avenc_aac'
         return '%s bitrate=%s ! mp4mux' % (encoder, self.aac_quality * 1000)
 
     def add_opus_encoder(self):
diff --git a/soundconverter/ui.py b/soundconverter/ui.py
index d11f21d..e55768e 100644
--- a/soundconverter/ui.py
+++ b/soundconverter/ui.py
@@ -519,7 +519,7 @@ def set_widget_initial_values(self, builder):
                     ('audio/mpeg'    , 'lamemp3enc'),
                     ('audio/x-flac'  , 'flacenc'),
                     ('audio/x-wav'   , 'wavenc'),
-                    ('audio/x-m4a'   , 'faac'),
+                    ('audio/x-m4a'   , 'fdkaacenc'),
                     ('audio/ogg; codecs=opus'   , 'opusenc'),
                     ('gst-profile'   , None),
                     ) # must be in same order in output_mime_type
--
2.25.0

