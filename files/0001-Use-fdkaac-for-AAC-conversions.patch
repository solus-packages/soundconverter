From 9ad15b6f25b9c3a7f34be4233fe09ef0c8696fa4 Mon Sep 17 00:00:00 2001
From: Peter O'Connor <peter@solus-project.com>
Date: Wed, 18 Jul 2018 13:38:54 +1000
Subject: [PATCH] Use fdkaac for AAC conversions

Signed-off-by: Peter O'Connor <peter@solus-project.com>
---
 soundconverter/gstreamer.py | 4 ++--
 soundconverter/ui.py        | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/soundconverter/gstreamer.py b/soundconverter/gstreamer.py
index 23aaa9b..cad9177 100644
--- a/soundconverter/gstreamer.py
+++ b/soundconverter/gstreamer.py
@@ -108,7 +108,7 @@ encoders = (
     ('id3mux', 'MP3 tags'),
     ('xingmux', 'VBR tags'),
     ('lamemp3enc', 'MP3'),
-    ('faac', 'AAC'),
+    ('fdkaacenc', 'AAC'),
     ('mp4mux', 'AAC'),
     ('opusenc', 'Opus'),
 )
@@ -634,7 +634,7 @@ class Converter(Decoder):
         return cmd
 
     def add_aac_encoder(self):
-        return 'faac bitrate=%s ! mp4mux' % (self.aac_quality * 1000)
+        return 'fdkaacenc bitrate=%s ! mp4mux' % (self.aac_quality * 1000)
 
     def add_opus_encoder(self):
         return 'opusenc bitrate=%s bitrate-type=vbr bandwidth=auto ! oggmux' % (self.opus_quality * 1000)
diff --git a/soundconverter/ui.py b/soundconverter/ui.py
index 1e71fe4..ac6276d 100644
--- a/soundconverter/ui.py
+++ b/soundconverter/ui.py
@@ -421,7 +421,7 @@ class PreferencesDialog(GladeWindow):
                     ('audio/mpeg'    , 'lamemp3enc'),
                     ('audio/x-flac'  , 'flacenc'),
                     ('audio/x-wav'   , 'wavenc'),
-                    ('audio/x-m4a'   , 'faac'),
+                    ('audio/x-m4a'   , 'fdkaacenc'),
                     ('audio/ogg; codecs=opus'   , 'opusenc'),
                     ('gst-profile'   , None),
                     ) # must be in same order in output_mime_type
-- 
2.18.0

